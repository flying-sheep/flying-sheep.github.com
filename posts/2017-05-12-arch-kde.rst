====================
Arch Linux KDE setup
====================

--------
Packages
--------

Basics
======
- base
- networkmanager (+ networkmanager-openconnect)
- intel-ucode
- nvidia
- samsung-unified-driver

Shell
=====
- zsh
- vim
- sudo (``visudo`` → ``:wheel …``)
- openssh
- prezto-git
- ripgrep
- mlocate
- lesspipe (+ unzip, unrar, cabextract, p7zip, cdrkit, html2text)

Devel
=====
- git
- base-devel
- pacaur
- reflector-timer
- jshon
- xdg-utils
- pkgbuild-introspection
- qtcreator (+ qmake-mimetypes)

Others
======
- firefox (or firefox-kde-opensuse + kmozillahelper + libdbusmenu-gtk3)
- rambox-bin
- steam (+ lib32-nvidia-utils)
- otf-fira-code or ttf-iosevka (the latter has variants)

KDE
===
Plasma
------
- plasma-meta
- plasma5-applets-eventcalendar
- plasma5-applets-redshift-control

Utilities & KCMs
----------------
- yakuake
- kwalletmanager (+ ksshaskpass)
- kcharselect
- kcolorchooser
- kdialog
- khelpcenter
- keditbookmarks
- octopi (and octopi-notifier, …)
- pacmanlogviewer-qt5
- print-manager
- systemd-kcm
- (kcm-pointing-devices-git): for laptops, as it has better touchpad support
- kio-extras

File Management
---------------
- dolphin
- dolphin-plugins
- filelight
- ark
- kdf

Devel
-----
- kcachegrind
- kompare
- okteta
- konsole
- kate

Documents & Media
---------
- phonon-qt5-gstreamer (+ gst-plugins-base, gst-plugins-good, gst-plugins-bad)
- gwenview
- spectacle
- kamera
- skanlite
- okular
- dragon
- kig
- kmplot

------
Config
------

Kate
====

Add to ``~/.zshenv``:

.. code:: zsh

    export EDITOR=kate

use ``sudoedit`` to edit files as root (with Kate).

SSH
===

Uncomment the SSH line in the ``~/.zpreztorc``:

.. code:: zsh

    zstyle ':prezto:module:ssh:load' identities 'id_rsa'

Add to ``~/.zshenv``:

.. code:: zsh

    export SSH_ASKPASS='/usr/bin/ksshaskpass'

If `sorin-ionescu/prezto#1320 <https://github.com/sorin-ionescu/prezto/issues/1320>`_ isn’t fixed,
you need to add ``</dev/null`` after each ``ssh-add`` in ``/usr/lib/prezto/modules/ssh/init.zsh``


Lesspipe
========

Add to ``~/.zshenv``:

.. code:: zsh

    export LESSOPEN='|lesspipe.sh %s'

GTK 3
=====

Add to ``~/.config/gtk-3.0/settings.ini``

.. code:: ini

    [Settings]
    gtk-primary-button-warps-slider=false
    gtk-shell-shows-menubar=1

Fontconfig
==========

Link those configs:

.. code:: zsh

    sudo ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d/
    sudo ln -s /etc/fonts/conf.avail/10-sub-pixel-rgb.conf /etc/fonts/conf.d/

And assign default fonts in ``/etc/fonts/local.conf``:

.. code:: xml

    <?xml version="1.0"?>
    <!DOCTYPE fontconfig SYSTEM "fonts.dtd">
    <fontconfig>
     <alias>
      <family>serif</family>
      <prefer><family>Noto Serif</family></prefer>
     </alias>
     <alias>
      <family>sans-serif</family>
      <prefer><family>Noto Sans</family></prefer>
     </alias>
     <alias>
      <family>monospace</family>
      <prefer><family>Hack</family></prefer>
     </alias>
     <!-- we don’t want this one to fc-match the wrong font -->
     <alias>
      <family>Arial</family>
      <prefer><family>sans-serif</family></prefer>
     </alias>
    </fontconfig>
    <!-- kate: space-indent on; indent-width 1; mixedindent off -->

Cursor
======
Make sure the default icon theme inherits from your cursor theme:

.. code:: zsh

    cat <'EOF' >/usr/share/icons/default/index.theme
    [Icon Theme]
    Inherits=breeze_cursors
    EOF

Plasma Calendar
===============
The builtin version would use ``kdepim-addons`` and ``korganizer``, but ``plasma5-applets-eventcalendar`` has less overhead

Systemd
=======
There are only few services that have to be enabled:

.. code:: zsh

    sudo systemctl enable sddm
    sudo systemctl enable org.cups.cupsd && sudo systemctl start org.cups.cupsd
    systemctl enable reflector.timer && systemctl start reflector.timer
